<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Kariba: installation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Kariba
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_installation.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">installation</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md24"></a>
Installation</h1>
<p>The Kariba library can be installed using CMake. The installation has been tested against CMake version 3.26, 3.28 and 4.0.</p>
<h2><a class="anchor" id="autotoc_md25"></a>
Prerequisites</h2>
<p>The library has two prerequisites:</p>
<ul>
<li>The GNU Scientific Library, GSL. This can often be installed with help of a package manager.</li>
<li><p class="startli">PyBind11. This can be installed with <code>python -m pip install pybind11</code>, and sometimes through a package manager. Either option should work; just ensure you are using at least version 2.13.</p>
<p class="startli">If you like, you can install PyBind11 in a virtual environment. Just make sure that virtual environment is activated when you build the Kariba library.</p>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md26"></a>
Download</h2>
<p>First, download or clone the repository.</p>
<p>You can download a zip file from <a href="https://github.com/evertrol/bhjet">https://github.com/evertrol/bhjet</a> (click the green '&lt;&gt; Code' button, then select "Download ZIP"), or clone the repository: on the command line, in a suitable directory:</p>
<div class="fragment"><div class="line">git clone https://github.com/evertrol/BHJet.git</div>
<div class="line"> </div>
<div class="line">cd BHJet</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md27"></a>
Set up the installation</h2>
<p>Once inside the local repository, take the following steps:</p>
<ul>
<li><p class="startli">Edit <code>cmake.config</code> and set the <code>CMAKE_INSTALL_PREFIX</code> variable to the base directory where you want the library to be installed. The actual library will be installed in the <code>lib</code> subdirectory, while the header files are installed in the <code>include/kariba</code> subdirectory (the directories are created if they do not exist).</p>
<p class="startli">You can always change this prefix with the <code>--install-prefix</code> option on the fly later during the installation process.</p>
<p class="startli">Note that you do not actually need to install the library to use it; it only needs to be build.</p>
</li>
<li><p class="startli">Edit <code>cmake.config</code> and update the base path(s) to the GSL library. If GSL is installed through your system package manager, there is no need to set this. If it is installed in another way or in a non-system location, change this accordingly. For example, Homebrew may install GSL in <code>/opt/homebrew/Cellar/gsl/2.8</code> or similar.</p>
<p class="startli">The include path and library path follow from the base directory, by appending <code>include</code> and <code>lib</code>. If these directories are different, change the <code>GSL_INCLUDE_DIR</code> and <code>GSL_LIBRARY_DIR</code> explicitly (Note that there should be a <code>gsl</code> subdirectory in the <code>include</code> directory, which should not be included in the <code>GSL_INCLUDE_DIR</code>).</p>
</li>
<li>Check that PyBind11 for Python is installed. Running <code>python -m pybind11</code> on the command line should show a help message (instead of an error), and <code>python -m pybind11 --cmakedir</code> should print the directory where PyBind11 stores CMake configuration files. (This command is exactly what is being used during the installation to locate and use PyBind11.)</li>
</ul>
<h2><a class="anchor" id="autotoc_md28"></a>
Build the code</h2>
<p>In the base BHJet directory, create a build directory; simply called it <code>build/</code>, and change to it: </p><div class="fragment"><div class="line">mkdir build</div>
<div class="line">cd build</div>
</div><!-- fragment --><p>Now, run CMake, pointing to the base directory: </p><div class="fragment"><div class="line">cmake ..</div>
</div><!-- fragment --><p>This will configure the build process for your system.</p>
<p>Now, build the library </p><div class="fragment"><div class="line">cmake --build .</div>
</div><!-- fragment --><p>If something goes wrong during the configuration or build process, you can simply remove everything in this <code>build</code> directory, fix the problem, and run the configuration and build step again.</p>
<p>The build should result in several library files, called libkariba.a (the static library) and libkariba.so (the shared library).</p>
<p>The header files are in the <code>include/kariba</code> directory inside the <code>build</code> directory.</p>
<p>For most projects, the static library is easier to use, in the sense that this will result in an executable that includes all the functions in the library, and does not need to link against the shared library.</p>
<p>If you want, you can now install the code, with </p><div class="fragment"><div class="line">cmake --install .</div>
</div><!-- fragment --><p>This essentially only copies the files to a more generic directory. If you like, you can change this directory from what is configuration in the <code>config.cmake</code> file, with the <code>--install-prefix</code> option. For example:</p>
<div class="fragment"><div class="line">cmake --install --install-prefix=$HOME/sw .</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md29"></a>
Compiling and running the test and examples</h2>
<p>If you build everything from the root directory, the unit tests and the examples should already have been built. Otherwise, enter the respective directories, tests/ and examples/, and simply run <code>make</code>.</p>
<p>Once build, inside the respective directories, you can run all the unit tests with</p>
<div class="fragment"><div class="line">./test_main</div>
</div><!-- fragment --><p>Hopefully all tests pass.</p>
<p>For the examples, inside their directory, run them with</p>
<div class="fragment"><div class="line">./corona</div>
<div class="line">./particles</div>
<div class="line">./singlezone</div>
</div><!-- fragment --><p>The singlezone example produces some output to the terminal:</p>
<div class="fragment"><div class="line">Physical quantities:</div>
<div class="line">Average electron Lorenz factor: 8038.47</div>
<div class="line">Equipartition Ue/UB: 698.369</div>
<div class="line">Electron power: 1.80399e+43</div>
<div class="line">Magnetic power: 2.58315e+40</div>
<div class="line">Proton power: 4.12068e+42</div>
<div class="line">Total power: 2.21864e+43 erg s^-1, 2.73063e-05 Eddington</div>
</div><!-- fragment --><p>All the examples also write a bunch of output files in the output/ directory. You can check the output files for correctness by comparing them with those in the output_comparison directory. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
