<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Kariba: installation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Kariba
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_installation.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">installation</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md24"></a>
Installation</h1>
<p>The Kariba library can be installed using make.</p>
<h2><a class="anchor" id="autotoc_md25"></a>
Prerequisites</h2>
<p>The library has just one prerequisites: the GNU Scientific Library, GSL. This can often be installed with help of a package manager.</p>
<h2><a class="anchor" id="autotoc_md26"></a>
Download</h2>
<p>First, download or clone the repository.</p>
<p>You can download a zip file from <a href="https://github.com/antonpannekoek/kariba">https://github.com/antonpannekoek/kariba</a> (click the green '&lt;&gt; Code' button, then select "Download ZIP"), or clone the repository: on the command line, in a suitable directory:</p>
<div class="fragment"><div class="line">git clone https://github.com/antonpannekoek/kariba.git</div>
<div class="line"> </div>
<div class="line">cd kariba</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md27"></a>
Set up the installation</h2>
<p>Edit <code>make.config</code> and set the variables as necessary. You can comment-out or leave blank the variables you don't need.</p>
<ul>
<li><code>GSL</code>: the main path to your GNU Scientific Library (GSL) directory. If your system package manager installed the GSL, you can leave this blank. You can probably find this path with <code>pkgconf gsl --variable=prefix</code> or <code>pkg-config gsl --variable=prefix</code>.</li>
<li><code>CXX</code>: the C++ compiler. In particular if you use OpenMP, make sure the compiler supports this.</li>
<li><code>CXXFLAGS</code>: some compiler flags you may want to set (or unset) when building the library.</li>
<li><code>OPENMP</code>: the compiler and linker option when using OpenMP. Leave empty or commented-out when not building with OpenMP.</li>
</ul>
<h2><a class="anchor" id="autotoc_md28"></a>
Build the code</h2>
<p>From the root directory, just run <code>make</code>.</p>
<p>This will call the Makefiles in the separate subdirectories: <code>src/</code>, <code>examples/</code>, <code>examples/model/</code> and <code>tests/</code>. You can build subdirectories separately by either going into the directory and (re)running <code>make</code>, or from the root, run any of</p>
<ul>
<li><code>make lib</code></li>
<li><code>make examples</code></li>
<li><code>make model</code></li>
<li><code>make tests</code></li>
</ul>
<p>The default is to build everything.</p>
<p>You can speed up building the code with parallel builds, using <code>make -j</code>. If you prefer to keep your system responsive during the build, supply the <code>-j</code> option with the number of cores you want to use for building, e.g. <code>make -j7</code> would leave one core for the system during the build on an 8-core machine.</p>
<h3><a class="anchor" id="autotoc_md29"></a>
Products</h3>
<p>The build process produces a <code>src/libkariba.a</code> file that is the actual Kariba library. This is the actual file that you would need to include at the linking stage when building your own model.</p>
<p>In <code>src/kariba</code> are the header files. If you include a header file like <code>#include &lt;<a class="el" href="Particles_8hpp.html">kariba/Particles.hpp</a>&gt;</code>, then provide the <code>src/</code> directory for the include path to the compiler, with the <code>-I</code> option.</p>
<p>Other files are the three example files, <code>examples/corona</code>, <code>examples/particles</code> and <code>examples/singlezone</code>.</p>
<p>In the <code>examples/model/</code> subdirectory, there is the <code>bhwrap</code> executable that can serve as an example application.</p>
<h2><a class="anchor" id="autotoc_md30"></a>
Compiling and running the test and examples</h2>
<p>If you build everything from the root directory, the unit tests and the examples should already have been built. Otherwise, enter the respective directories, tests/ and examples/, and simply run <code>make</code>.</p>
<p>Once build, inside the respective directories, you can run all the unit tests with</p>
<div class="fragment"><div class="line">./test_main</div>
</div><!-- fragment --><p>Hopefully all tests pass.</p>
<p>Run <code>./test_main -h</code> to see options to select specific unit tests.</p>
<hr  />
<p>For the examples, inside their directory, run them with</p>
<div class="fragment"><div class="line">./corona</div>
<div class="line">./particles</div>
<div class="line">./singlezone</div>
</div><!-- fragment --><p>The singlezone example produces some output to the terminal:</p>
<div class="fragment"><div class="line">Physical quantities:</div>
<div class="line">Average electron Lorenz factor: 8038.47</div>
<div class="line">Equipartition Ue/UB: 698.369</div>
<div class="line">Electron power: 1.80399e+43</div>
<div class="line">Magnetic power: 2.58315e+40</div>
<div class="line">Proton power: 4.12068e+42</div>
<div class="line">Total power: 2.21864e+43 erg s^-1, 2.73063e-05 Eddington</div>
</div><!-- fragment --><p>All the examples also write a bunch of output files in the output/ directory. You can check the output files for correctness by comparing them with those in the output_comparison directory. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
